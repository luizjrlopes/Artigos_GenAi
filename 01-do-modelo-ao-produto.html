<!DOCTYPE html>
<html class="scroll-smooth" lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Do Modelo ao Produto: LLM em Apps de Entrega</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&amp;family=Fira+Code:wght@400;500&amp;display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            animation: {
              "spin-slow": "spin 3s linear infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              mono: ["Fira Code", "monospace"],
            },
            colors: {
              brand: {
                50: "#f5f3ff",
                100: "#ede9fe",
                200: "#ddd6fe",
                300: "#c4b5fd",
                400: "#a78bfa",
                500: "#8b5cf6", // Roxo principal
                600: "#7c3aed",
                700: "#6d28d9",
                800: "#5b21b6",
                900: "#4c1d95",
              },
            },
          },
        },
      };
    </script>
    <style>
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      .code-block {
        background-color: #1e1e1e;
        color: #d4d4d4;
        padding: 1.5rem;
        border-radius: 0.5rem;
        font-family: "Fira Code", monospace;
        overflow-x: auto;
        font-size: 0.85rem;
        line-height: 1.6;
        border: 1px solid #333;
      }

      .keyword {
        color: #569cd6;
      }
      .string {
        color: #ce9178;
      }
      .function {
        color: #dcdcaa;
      }
      .comment {
        color: #6a9955;
        font-style: italic;
      }

      /* Styles da Hero (Inalterados) */
      .glass-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.15);
      }

      .connection-line {
        position: relative;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.15);
      }

      .connection-line::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.9),
          transparent
        );
        animation: flowLine 2s infinite linear;
      }

      .grid-bg {
        background-image: linear-gradient(
            rgba(255, 255, 255, 0.03) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 40px 40px;
      }

      .step-card {
        transition: all 0.2s ease-in-out;
      }
      .step-card:hover {
        transform: translateY(-2px);
        border-color: #8b5cf6;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800 antialiased">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 fixed w-full top-0 z-50">
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between"
      >
        <a
          href="index.html"
          class="flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer"
        >
          <div class="bg-brand-600 text-white p-2 rounded-lg">
            <i class="fas fa-cubes"></i>
          </div>
          <h1 class="text-xl font-bold text-gray-900">
            LLM Product Engineering
          </h1>
        </a>
                  <div class="flex items-center gap-3">
            <div class="hidden md:block text-sm text-gray-500">
              Módulo 1: Fundamentos e Estratégias
            </div>
            <!-- Botões de Exportação DOCX/PDF Visual -->
            <div class="flex items-center gap-2 md:gap-3">
              <button id="export-pdf-btn" class="flex items-center gap-2 px-3 md:px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm md:text-base font-medium shadow-sm" title="Exportar como PDF">
                <i class="fas fa-file-pdf"></i>
                <span class="hidden md:inline">PDF</span>
              </button>
              <button id="export-docx-btn" class="flex items-center gap-2 px-3 md:px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm md:text-base font-medium shadow-sm" title="Exportar como DOCX">
                <i class="fas fa-file-word"></i>
                <span class="hidden md:inline">DOCX</span>
              </button>
            </div>
            
      </div>
    </header>

    <div
      class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12 flex flex-col lg:flex-row gap-8"
    >
      <!-- Sidebar Navigation -->
      <aside
        aria-label="Navegação lateral do artigo"
        class="lg:w-64 flex-shrink-0 hidden lg:block"
      >
        <nav class="sticky top-24 space-y-1">
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-brand-50 hover:text-brand-700"
            href="#intro"
          >
            <i class="fas fa-rocket w-6 text-brand-600"></i> Contexto
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#journey"
          >
            <i class="fas fa-map-signs w-6 text-brand-600"></i> A Jornada
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#approach"
          >
            <i class="fas fa-utensils w-6 text-brand-600"></i> Abordagem
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#concepts"
          >
            <i class="fas fa-book w-6 text-brand-600"></i> Conceitos
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#pipeline"
          >
            <i class="fas fa-project-diagram w-6 text-brand-600"></i> Pipeline
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#hands-on"
          >
            <i class="fas fa-code w-6 text-brand-600"></i> Implementação
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#risks"
          >
            <i class="fas fa-chart-line w-6 text-brand-600"></i>
            Métricas
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#evidence"
          >
            <i class="fas fa-vial w-6 text-brand-600"></i> Experimentação
          </a>
          <a
            class="group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"
            href="#reflections"
          >
            <i class="fas fa-lightbulb w-6 text-brand-600"></i> Reflexões
          </a>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 space-y-12">
        <!-- Hero Section (INALTERADO) -->
        <section class="relative rounded-3xl overflow-hidden mb-12 shadow-2xl">
          <!-- Background Gradient & Grid -->
          <div
            class="absolute inset-0 bg-gradient-to-br from-[#4c1d95] via-[#6d28d9] to-[#8b5cf6]"
          ></div>
          <div
            class="absolute inset-0 grid-bg opacity-30 pointer-events-none"
          ></div>
          <!-- Ambient Lighting (Decorativo) -->
          <div
            class="absolute top-[-20%] left-[-20%] w-[60%] h-[60%] bg-brand-400 rounded-full mix-blend-overlay filter blur-[100px] opacity-20 animate-pulse-slow"
          ></div>
          <div
            class="absolute bottom-[-20%] right-[-20%] w-[60%] h-[60%] bg-brand-300 rounded-full mix-blend-overlay filter blur-[100px] opacity-20 animate-pulse-slow"
            style="animation-delay: 3s"
          ></div>
          <div
            class="flex flex-col lg:flex-row items-center justify-between px-8 py-16 md:px-16 md:py-20 relative z-10 gap-12"
          >
            <!-- Coluna Esquerda: Texto -->
            <div class="lg:w-1/2 w-full text-white">
              <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 backdrop-blur-sm mb-6"
              >
                <i class="fas fa-microchip text-brand-200 text-xs"></i>
                <span
                  class="text-xs font-semibold tracking-wider uppercase text-brand-100"
                  >Tech Engineering</span
                >
              </div>
              <h1
                class="text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight leading-tight mb-6"
              >
                Do modelo <br />
                <span
                  class="text-transparent bg-clip-text bg-gradient-to-r from-brand-200 to-white"
                  >ao produto</span
                >
              </h1>
              <p
                class="text-lg md:text-xl text-brand-100 font-light leading-relaxed mb-8 border-l-4 border-brand-400 pl-6"
              >
                Como transformar uma API de LLM em uma feature robusta,
                escalável e segura.
              </p>
            </div>
            <!-- Coluna Direita: Diagrama Visual (Model to Product) -->
            <div class="lg:w-1/2 w-full flex items-center justify-center">
              <div class="relative w-full max-w-md">
                <div class="flex items-center justify-center gap-4">
                  <!-- Model (Brain) -->
                  <div class="flex flex-col items-center gap-2">
                    <div
                      class="glass-card w-20 h-20 rounded-2xl flex items-center justify-center text-3xl text-brand-200 border border-brand-400/30 shadow-lg"
                    >
                      <i class="fas fa-brain"></i>
                    </div>
                    <span class="text-xs font-mono text-brand-200">MODEL</span>
                  </div>
                  <!-- Transformation Arrow -->
                  <div
                    class="flex-1 h-1 bg-brand-400/30 rounded-full relative overflow-hidden"
                  >
                    <div
                      class="absolute inset-0 bg-brand-200/50 w-1/2 animate-[flowLine_1.5s_infinite_linear]"
                    ></div>
                  </div>
                  <!-- API Layer (Middle) -->
                  <div class="flex flex-col items-center gap-2">
                    <div
                      class="w-12 h-12 rounded-full bg-brand-500/20 flex items-center justify-center border border-brand-400 text-white text-xl animate-pulse"
                    >
                      <i class="fas fa-cog"></i>
                    </div>
                  </div>
                  <!-- Transformation Arrow -->
                  <div
                    class="flex-1 h-1 bg-brand-400/30 rounded-full relative overflow-hidden"
                  >
                    <div
                      class="absolute inset-0 bg-brand-200/50 w-1/2 animate-[flowLine_1.5s_infinite_linear]"
                      style="animation-delay: 0.2s"
                    ></div>
                  </div>
                  <!-- Product (Box) -->
                  <div class="flex flex-col items-center gap-2">
                    <div
                      class="glass-card w-20 h-20 rounded-2xl flex items-center justify-center text-3xl text-white border border-brand-300 shadow-[0_0_20px_rgba(139,92,246,0.4)]"
                    >
                      <i class="fas fa-cube"></i>
                    </div>
                    <span class="text-xs font-mono text-white font-bold"
                      >PRODUCT</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 1. Contexto e Propósito -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="intro"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">1.</span> Contexto e Propósito — explicado de verdade
          </h2>
          <div class="prose max-w-none text-gray-600">
            <p class="mb-6 font-medium text-gray-800">
              Nos últimos anos, integrar um LLM virou banal. Você pega uma chave
              da OpenAI, escreve 10 linhas de código e pronto: tem “IA”
              respondendo textos bonitos na sua tela.
            </p>
            <p class="mb-6">
              Mas existe uma diferença abissal entre
              <strong>um protótipo que funciona no Jupyter</strong> e uma
              <strong>feature real</strong> que atende milhões de usuários sem
              travar o app, sem explodir custos e sem inventar informações perigosas.
            </p>
            <p class="mb-6">
              O propósito deste artigo é guiar você pela jornada completa — da
              primeira chamada ao modelo até a operação em escala — mostrando
              como transformar uma ideia em uma feature confiável, rápida,
              escalável e observável.
            </p>
            <div
              class="bg-brand-50 p-6 rounded-lg border-l-4 border-brand-500 mb-6"
            >
              <h4 class="text-brand-800 font-bold mb-2">
                Ao final, você vai entender:
              </h4>
              <ul class="list-disc pl-5 space-y-2 text-brand-900">
                <li>Como sair do protótipo (Playground, Colab, Jupyter).</li>
                <li>Como criar um MVP funcional.</li>
                <li>Como evoluir para uma feature robusta.</li>
                <li>Como operar IA em produção com métricas, resiliência e custos sob controle.</li>
                <li>Como montar um Pipeline de Produção de IA igual aos usados por grandes empresas.</li>
              </ul>
            </div>
            <p class="text-sm text-gray-500 italic">
              Esse é o mapa completo para transformar uma API de LLM em produto.
            </p>
          </div>
        </section>

        <!-- 2. A Jornada Completa -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="journey"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">2.</span> A Jornada Completa: do
            protótipo à produção
          </h2>
          <p class="text-gray-600 mb-8">
            A maior lacuna do artigo antigo era a ausência da jornada. Aqui ela
            está, explícita, organizada e profunda.
          </p>

          <div class="space-y-6">
     
        <!-- Etapa 1 -->
<div class="step-card bg-gray-50 p-6 rounded-xl border border-gray-200">
  <div class="flex items-center gap-3 mb-3">
    <span class="bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-xs font-bold uppercase">
      Etapa 1
    </span>
    <h3 class="text-lg font-bold text-gray-900">
      Protótipo (o estado “romântico”)
    </h3>
  </div>

  <p class="text-gray-600 mb-3">
    Aqui o objetivo é **puro e simples**: responder a pergunta
    <em>“O LLM consegue fazer o que eu quero?”</em>.
    Nada mais importa — não existe preocupação com custo, latência, tokens,
    quedas de API, variabilidade, logs ou resiliência. O foco é validar
    rapidamente a ideia.
  </p>

  <p class="text-gray-600 mb-3">
    Normalmente isso acontece no Playground, Jupyter, Colab ou em um script isolado.
    É onde você testa prompts, entende o comportamento do modelo e valida se a tarefa
    é viável com IA.
  </p>

  <p class="text-gray-600 text-sm">
    <strong>O que esta etapa entrega:</strong> viabilidade técnica.  
    <strong>O que ela NÃO entrega:</strong> nada que possa ser usado em um produto real.
  </p>
</div>


            <!-- Etapa 2 -->
         <!-- Etapa 2 -->
<div class="step-card bg-blue-50 p-6 rounded-xl border border-blue-100">
  <div class="flex items-center gap-3 mb-3">
    <span class="bg-blue-200 text-blue-800 px-3 py-1 rounded-full text-xs font-bold uppercase">
      Etapa 2
    </span>
    <h3 class="text-lg font-bold text-blue-900">
      MVP Técnico (primeiro endpoint real)
    </h3>
  </div>

  <p class="text-blue-800 mb-3">
    Agora surge uma nova pergunta:
    <em>“Funciona de ponta a ponta dentro do meu backend, com dados reais?”</em>
    Aqui você sai do protótipo isolado e cria o primeiro endpoint funcional:
    busca dados no banco, monta um prompt, chama o modelo e retorna algo útil
    para o frontend.
  </p>

  <p class="text-blue-800 mb-3">
    Esse MVP já é integrado ao sistema, mas ainda é <strong>frágil</strong>.
    Ele funciona em condições normais, porém falha com facilidade: é lento sob carga,
    depende totalmente do provedor, não possui logs estruturados, não controla custos
    e não escala.
  </p>

  <p class="text-blue-800 text-sm">
    <strong>O que esta etapa entrega:</strong> funcionalidade básica operando no produto.  
    <strong>O que ela NÃO entrega:</strong> robustez, estabilidade ou previsibilidade.
  </p>
</div>


            <!-- Etapa 3 -->
         <!-- Etapa 3 -->
<div class="step-card bg-purple-50 p-6 rounded-xl border border-purple-100">
  <div class="flex items-center gap-3 mb-3">
    <span
      class="bg-purple-200 text-purple-800 px-3 py-1 rounded-full text-xs font-bold uppercase"
      >Etapa 3</span
    >
    <h3 class="text-lg font-bold text-purple-900">
      Feature Robusta (nasce engenharia de verdade)
    </h3>
  </div>

  <p class="text-purple-800 mb-4">
    Aqui o protótipo deixa de ser um experimento frágil e começa a virar um
    pedaço confiável do produto. É quando aparecem os problemas reais:
    <strong>latência alta</strong>, <strong>custos imprevisíveis</strong>,
    <strong>erros silenciosos</strong> e <strong>comportamento instável</strong>
    do modelo. Para sobreviver, a feature precisa de mecanismos de resiliência.
  </p>

  <div class="space-y-3 text-sm text-purple-900">
    
    <div>
      <span class="font-bold">• Circuit Breaker</span> — desliga temporariamente
      as chamadas ao modelo quando ele começa a falhar, impedindo que o sistema
      inteiro entre em colapso.
    </div>

    <div>
      <span class="font-bold">• Retry com Backoff</span> — repete a chamada em
      caso de falhas transitórias, esperando intervalos progressivos para evitar
      sobrecarga.
    </div>

    <div>
      <span class="font-bold">• Caching Inteligente</span> — guarda respostas já
      geradas para economizar tokens, reduzir latência e evitar chamadas
      repetidas ao modelo.
    </div>

    <div>
      <span class="font-bold">• Compressão de Contexto</span> — filtra e reduz
      dados antes de enviar ao modelo para não extrapolar a janela de contexto
      e evitar custos absurdos.
    </div>

    <div>
      <span class="font-bold">• Limitação de Tokens</span> — controla o tamanho
      máximo do prompt e da resposta para impedir que o custo e a latência
      cresçam sem controle.
    </div>

    <div>
      <span class="font-bold">• Troca de Modelo</span> — permite alternar entre
      modelos (GPT-4, GPT-3.5, local, fallback) conforme custo, qualidade ou
      disponibilidade.
    </div>

    <div>
      <span class="font-bold">• Abstração do Provedor de LLM</span> — evita
      acoplamento direto com a API da OpenAI. Em vez de chamar o modelo
      diretamente, você chama funções como <code>generateSummary()</code>,
      facilitando evolução e troca de provedores.
    </div>

  </div>

  <p class="text-purple-800 mt-4">
    É aqui que a IA finalmente se comporta como parte do produto — não como um
    “script improvisado”. Sem esses mecanismos, qualquer pico de uso ou
    instabilidade derruba sua aplicação.
  </p>
</div>


         <!-- Etapa 4 -->
      <div class="step-card bg-green-50 p-6 rounded-xl border border-green-100">
  <div class="flex items-center gap-3 mb-3">
    <span
      class="bg-green-200 text-green-800 px-3 py-1 rounded-full text-xs font-bold uppercase"
      >Etapa 4</span
    >
    <h3 class="text-lg font-bold text-green-900">
      Produção Operacional (o sistema respira sozinho)
    </h3>
  </div>

  <p class="text-green-800 mb-4">
    Aqui a feature deixa de ser um experimento controlado e passa a operar
    como parte viva do produto. A pergunta muda de “funciona?” para 
    <strong>“funciona sempre, de forma previsível e com custo sustentável?”</strong>.
    É o momento de implementar observabilidade, automação e processos de 
    confiabilidade contínua.
  </p>

  <div class="space-y-3 text-sm text-green-900">

    <div>
      <span class="font-bold">• Métricas de Latência</span> — monitoramento de p95 e p99 
      para garantir que a IA não degrade a experiência do usuário, mesmo sob carga.
    </div>

    <div>
      <span class="font-bold">• Dashboards de Custo por Endpoint</span> — visualização clara
      de quais rotas consomem mais tokens, permitindo decisões informadas sobre 
      otimização ou troca de modelo.
    </div>

    <div>
      <span class="font-bold">• Alarmes Automáticos</span> — alertas quando a latência sobe,
      o custo explode, o provedor falha ou o número de timeouts aumenta.
    </div>

    <div>
      <span class="font-bold">• Logs Estruturados + Fallback Padrão</span> — cada requisição
      deve registrar dados completos (latência, tokens, modelo, erro). Em caso de falha,
      a aplicação retorna uma resposta segura e previsível.
    </div>

    <div>
      <span class="font-bold">• Testes A/B e Versionamento de Prompts</span> — permite comparar
      comportamentos diferentes da IA, validar hipóteses de melhoria e reverter mudanças 
      perigosas rapidamente.
    </div>

    <div>
      <span class="font-bold">• Filas Assíncronas</span> — processamento em background
      para tarefas pesadas ou que não precisam bloquear a resposta ao usuário,
      garantindo fluidez e resiliência.
    </div>

  </div>

  <p class="text-green-800 mt-4">
    Este é o estágio em que a IA finalmente “respira sozinha”: monitora seu próprio
    desempenho, se protege de falhas, revela custos escondidos e se integra ao produto
    com maturidade operacional. É quando a engenharia realmente garante que a IA não
    seja apenas poderosa — mas também confiável.
  </p>
      </div>


            <!-- Etapa 5 -->
            <div class="step-card bg-teal-50 p-6 rounded-xl border border-teal-100">
              <div class="flex items-center gap-3 mb-3">
                <span class="bg-teal-200 text-teal-800 px-3 py-1 rounded-full text-xs font-bold uppercase">Etapa 5</span>
                <h3 class="text-lg font-bold text-teal-900">
                  Evolução contínua
                </h3>
              </div>
              <p class="text-teal-900 mb-3">
                A equipe monitora continuamente mudanças nas respostas, variação de custos, degradação de modelos e necessidade de ajustes no prompt.
              </p>
              <p class="text-teal-900 text-sm">
                IA é dinâmica. Modelos mudam. Custos variam. Comportamentos se alteram. O sistema precisa acompanhar.
              </p>
            </div>
          </div>
        </section>

        <!-- 3. Abordagem Prática -->
     <section class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100" id="approach">
  <h2 class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2">
    <span class="text-brand-600">3.</span> Abordagem Prática — com contexto real
  </h2>

  <div class="prose max-w-none text-gray-600">
    <p class="mb-4">
      O exemplo de <strong>resumir avaliações</strong> é perfeito para explicar como um problema 
      aparentemente simples exige engenharia de verdade quando chega perto da realidade 
      de um app de delivery. Esse é um cenário onde surgem limitações concretas:
    </p>

    <ul class="list-disc pl-6 mb-6 space-y-1">
      <li><strong>Alto volume de dados:</strong> restaurantes recebem dezenas ou centenas de avaliações por dia.</li>
      <li><strong>Informações não estruturadas:</strong> textos longos, gírias, ironias, emojis e ruídos.</li>
      <li><strong>Risco de alucinação:</strong> o modelo pode inventar conclusões se o prompt estiver mal definido.</li>
      <li><strong>Limites reais de contexto:</strong> não é possível enviar tudo; é necessário filtrar antes.</li>
      <li><strong>Potencial explosão de custos:</strong> muitos tokens → muitos reais.</li>
      <li><strong>Necessidade de caching agressivo:</strong> para evitar chamadas repetidas e reduzir gastos.</li>
    </ul>

    <p class="text-gray-700">
      Em um protótipo, um simples <em>“manda tudo pro modelo e vê no que dá”</em> pode até funcionar.  
      Mas em produção, é diferente: você precisa <strong>orquestrar dados, controlar janelas de contexto,
      supervisionar custos, evitar alucinações e garantir previsibilidade do sistema</strong>.
    </p>

    <p class="text-gray-700 mt-4">
      Não basta chamar a API — é preciso montar uma cadeia de engenharia que sustente esse fluxo:
      <strong>filtragem → construção de prompt → chamada resiliente → pós-processamento → caching 
      → métricas → fallback</strong>.
    </p>
  </div>
</section>


        <!-- 4. Conceitos Fundamentais -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="concepts"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">4.</span> Conceitos Fundamentais
          </h2>
          <p class="text-gray-600 mb-6">
            Abaixo está a versão explicada com profundidade e implicação
            prática.
          </p>
          <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-left border-collapse">
              <thead
                class="bg-gray-100 text-gray-700 uppercase font-bold text-xs"
              >
                <tr>
                  <th class="px-6 py-3 rounded-tl-lg">Conceito</th>
                  <th class="px-6 py-3">Definição</th>
                  <th class="px-6 py-3 rounded-tr-lg">Implicação Prática</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 font-semibold text-brand-700">Prompt</td>
                  <td class="px-6 py-4">É o “contrato verbal” com o modelo.</td>
                  <td class="px-6 py-4 text-gray-600">
                    Prompt mal escrito → modelo prolixo, caro e impreciso.
                  </td>
                </tr>
                <tr class="bg-gray-50">
                  <td class="px-6 py-4 font-semibold text-brand-700">Token</td>
                  <td class="px-6 py-4">
                    Unidade de custo e unidade de latência.
                  </td>
                  <td class="px-6 py-4 text-gray-600">
                    Dominar token é dominar custo.
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold text-brand-700">
                    Context Window
                  </td>
                  <td class="px-6 py-4">É o “campo de visão” do modelo.</td>
                  <td class="px-6 py-4 text-gray-600">
                    Se mandar dados demais fica caro, lento e o modelo ignora
                    metade. Exige pré-filtragem.
                  </td>
                </tr>
                <tr class="bg-gray-50">
                  <td class="px-6 py-4 font-semibold text-brand-700">Cache</td>
                  <td class="px-6 py-4">Seu melhor amigo.</td>
                  <td class="px-6 py-4 text-gray-600">
                    A diferença entre pagar R$ 2.000 ou R$ 200 no final do mês.
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold text-brand-700">
                    Circuit Breaker
                  </td>
                  <td class="px-6 py-4">Proteção contra falhas externas.</td>
                  <td class="px-6 py-4 text-gray-600">
                    Sem ele, uma queda na OpenAI derruba seu app inteiro.
                  </td>
                </tr>
                <tr class="bg-gray-50">
                  <td class="px-6 py-4 font-semibold text-brand-700">
                    Rate Limiting
                  </td>
                  <td class="px-6 py-4">Controle de fluxo de requisições.</td>
                  <td class="px-6 py-4 text-gray-600">
                    Garante que um usuário (ou bot) não gere milhares de resumos
                    em 5 segundos.
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold text-brand-700">
                    Observabilidade
                  </td>
                  <td class="px-6 py-4">Visibilidade do sistema.</td>
                  <td class="px-6 py-4 text-gray-600">
                    Sem logs, sem métricas → você está voando às cegas.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- 5. O Pipeline Completo -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="pipeline"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">5.</span> O Pipeline Completo — versão
            REAL
          </h2>
          <p class="text-gray-600 mb-8">
            Aqui está o que o artigo original não explicou. Agora está completo,
            pedagógico e aplicável.
          </p>

          <!-- Flow Diagram Text -->
          <div
            class="bg-slate-900 text-slate-300 p-6 rounded-xl font-mono text-sm mb-8 overflow-x-auto whitespace-nowrap shadow-inner"
          >
            Usuário → Frontend → API Gateway → Serviço Orquestrador → Banco de
            Dados → <br />
            Processamento → Prompt Builder → LLM Provider → Resposta →
            Pós-processamento → Devolução ao App
          </div>

          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h4 class="font-bold text-brand-700 mb-2">  1) Frontend</h4>
              <p class="text-sm text-gray-600 mb-4">
                Responsável por UX de carregamento, timeouts locais e mensagens
                de fallback.
              </p>

              <h4 class="font-bold text-brand-700 mb-2">  2) API Gateway</h4>
              <p class="text-sm text-gray-600 mb-4">
                Filtra abuso e protege a infraestrutura (auth, rate limits,
                verificação de payload).
              </p>

              <h4 class="font-bold text-brand-700 mb-2">
                  3) Serviço Orquestrador (backend da IA)
              </h4>
              <p class="text-sm text-gray-600 mb-4">
                O cérebro do sistema. Controla busca de dados, prompt, chamadas
                e erros. Deveria ser desacoplado do resto do backend.
              </p>

              <h4 class="font-bold text-brand-700 mb-2">
                  4) Banco de Dados
              </h4>
              <p class="text-sm text-gray-600 mb-4">
                Não é só “buscar”. É filtrar por data, eliminar ruído e agrupar
                dados para economizar tokens.
              </p>
            </div>
            <div>
              <h4 class="font-bold text-brand-700 mb-2">
                  5) Prompt Builder
              </h4>
              <p class="text-sm text-gray-600 mb-4">
                Gera prompts previsíveis e estáveis. Um prompt é um artefato
                versionado.
              </p>

              <h4 class="font-bold text-brand-700 mb-2">
                  6) LLM Provider (Abstração)
              </h4>
              <p class="text-sm text-gray-600 mb-4">
                Nunca chame o modelo direto. Crie interfaces como
                <code>generateSummary()</code> para permitir troca de modelos e
                fallbacks.
              </p>

              <h4 class="font-bold text-brand-700 mb-2">
                  7, 8 & 9) Pós-processamento e Entrega
              </h4>
              <p class="text-sm text-gray-600 mb-4">
                Corrige formatos, monitora métricas (custo/latência) e entrega
                de forma segura ao usuário.
              </p>
            </div>
          </div>
        </section>

        <!-- 6. Mão na Massa -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="hands-on"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">6.</span> Mão na Massa: Implementação
          </h2>
          <div class="prose max-w-none text-gray-700 mb-8">
            <p>
              Chegou o momento de transformar a arquitetura em código. Vamos
              construir a feature de resumo de avaliações passo a passo,
              mostrando o “porquê” de cada etapa.
            </p>
          </div>

          <!-- Code Section 1 -->
          <div class="mb-8">
            <h3 class="font-bold text-gray-800 mb-2">
              6.1. Busca de Avaliações com Filtro Inteligente
            </h3>
            <p class="text-sm text-gray-600 mb-3">
              A filtragem controla a quantidade de tokens, melhora o foco do
              modelo e reduz custos.
            </p>
            <pre
              class="code-block"
            ><code><span class="keyword">def</span> <span class="function">get_recent_reviews</span>(restaurant_id: str, limit: int = 20) -&gt; List[str]:
    reviews = query_db(
        <span class="string">"""
        SELECT text
        FROM reviews
        WHERE restaurant_id = :id
        ORDER BY created_at DESC
        LIMIT :limit
        """</span>,
        {<span class="string">"id"</span>: restaurant_id, <span class="string">"limit"</span>: limit}
    )
    <span class="keyword">return</span> [r[<span class="string">"text"</span>] <span class="keyword">for</span> r <span class="keyword">in</span> reviews]</code></pre>
          </div>

          <!-- Code Section 2 -->
          <div class="mb-8">
            <h3 class="font-bold text-gray-800 mb-2">
              6.2. Construção do Prompt
            </h3>
            <p class="text-sm text-gray-600 mb-3">
              Prompts estruturados garantem respostas mais consistentes e
              previsíveis.
            </p>
            <pre
              class="code-block"
            ><code><span class="keyword">def</span> <span class="function">build_summary_prompt</span>(reviews: List[str]) -&gt; str:
    joined = <span class="string">"\n- "</span>.join(reviews)

    <span class="keyword">return</span> <span class="string">f"""
Você é um assistente de delivery especializado em análises de clientes.

Resuma as avaliações abaixo em até 4 linhas, destacando:
- pontos positivos,
- pontos negativos,
- tom geral das experiências.

Avaliações:
- {joined}
"""</span>.strip()</code></pre>
          </div>

          <!-- Code Section 3 -->
          <div class="mb-8">
            <h3 class="font-bold text-gray-800 mb-2">
              6.3. Chamada ao Modelo com Resiliência
            </h3>
            <p class="text-sm text-gray-600 mb-3">
              Timeout, tratamento de erro e encapsulamento garantem
              estabilidade.
            </p>
            <pre
              class="code-block"
            ><code><span class="keyword">async def</span> <span class="function">call_llm</span>(prompt: str):
    <span class="keyword">try</span>:
        response = client.chat.completions.create(
            model=<span class="string">"gpt-3.5-turbo"</span>,
            messages=[{<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: prompt}],
            max_tokens=150,
            temperature=0.4,
            timeout=4
        )
        <span class="keyword">return</span> response.choices[0].message.content.strip()

    <span class="keyword">except</span> TimeoutError:
        <span class="keyword">raise</span> HTTPException(503, <span class="string">"LLM demorou demais"</span>)

    <span class="keyword">except</span> Exception:
        <span class="keyword">raise</span> HTTPException(503, <span class="string">"Serviço indisponível"</span>)</code></pre>
          </div>

          <div
            class="p-4 bg-brand-50 border-l-4 border-brand-500 rounded text-sm text-brand-900"
          >
            <strong>O que completa a feature em produção:</strong> Cache
            distribuído (Redis), Circuit Breaker, logs estruturados e métricas
            de latência.
          </div>
        </section>

        <!-- 7. Métricas, Riscos e Boas Práticas -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="risks"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">7.</span> Métricas, Riscos e Boas
            Práticas
          </h2>
          <div class="prose max-w-none text-gray-700 mb-6">
            <p>
              Operar IA sem métricas é como dirigir no escuro. A seguir estão os
              indicadores essenciais.
            </p>
          </div>

          <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div>
              <h3
                class="font-bold text-gray-800 border-b border-gray-200 pb-2 mb-4"
              >
                Métricas Essenciais
              </h3>
              <ul class="space-y-4">
                <li class="flex items-start">
                  <i class="fas fa-chart-line mt-1 text-brand-500 w-6"></i>
                  <div>
                    <span class="font-bold text-gray-900"
                      >Latência (p95 e p99)</span
                    >
                    <p class="text-sm text-gray-600">
                      Um pequeno aumento no p95 pode derrubar a satisfação.
                      Meta: p95 < 1200ms.
                    </p>
                  </div>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-coins mt-1 text-yellow-500 w-6"></i>
                  <div>
                    <span class="font-bold text-gray-900">Custo por Token</span>
                    <p class="text-sm text-gray-600">
                      Monitore gasto total e variação por endpoint. Otimização
                      pode reduzir 80% do custo.
                    </p>
                  </div>
                </li>
                <li class="flex items-start">
                  <i
                    class="fas fa-exclamation-triangle mt-1 text-red-500 w-6"
                  ></i>
                  <div>
                    <span class="font-bold text-gray-900"
                      >Taxa de Erro e Fallback</span
                    >
                    <p class="text-sm text-gray-600">
                      Se subir repentinamente, o prompt pode estar instável ou a
                      janela de contexto estourando.
                    </p>
                  </div>
                </li>
              </ul>
            </div>
            <div>
              <h3
                class="font-bold text-gray-800 border-b border-gray-200 pb-2 mb-4"
              >
                Boas Práticas de Engenharia
              </h3>
              <ul class="space-y-4">
                <li class="flex items-start">
                  <i class="fas fa-check-circle mt-1 text-green-500 w-6"></i>
                  <div>
                    <span class="font-bold text-gray-900"
                      >Sempre use Cache</span
                    >
                    <p class="text-sm text-gray-600">
                      Chaveie por restaurante, expire em janelas previsíveis. É
                      a operação sustentável.
                    </p>
                  </div>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-bolt mt-1 text-blue-500 w-6"></i>
                  <div>
                    <span class="font-bold text-gray-900"
                      >Circuit Breaker & Timeouts</span
                    >
                    <p class="text-sm text-gray-600">
                      Se o provedor falhar, pause chamadas. Use timeouts
                      agressivos (curtos).
                    </p>
                  </div>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-history mt-1 text-purple-500 w-6"></i>
                  <div>
                    <span class="font-bold text-gray-900"
                      >Versione seus Prompts</span
                    >
                    <p class="text-sm text-gray-600">
                      Facilita debugging, testes A/B e rollback de
                      comportamento.
                    </p>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <div class="bg-red-50 p-4 rounded-lg border border-red-100">
            <h4 class="text-red-800 font-bold mb-2">Principais Riscos</h4>
            <p class="text-sm text-red-700">
              Latência excessiva, Custos imprevisíveis, Alucinações (inventar
              dados), Dependência do provedor e Prompt Drift (mudanças
              silenciosas no modelo).
            </p>
          </div>
        </section>

        <!-- 8. Evidências & Experimentação -->
        <section
          class="bg-white rounded-2xl shadow-sm p-8 border border-gray-100"
          id="evidence"
        >
          <h2
            class="text-2xl font-bold text-gray-900 mb-6 border-b pb-4 flex items-center gap-2"
          >
            <span class="text-brand-600">8.</span> Evidências & Experimentação
          </h2>
          <div class="prose max-w-none text-gray-700 mb-6">
            <p>
              Uma feature de IA só se justifica quando gera impacto real.
              Experimentação elimina achismo.
            </p>
          </div>

          <div class="space-y-6">
            <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-blue-500">
              <h3 class="font-bold text-blue-900 mb-2">
                O Ciclo de Experimentação
              </h3>
              <ol class="list-decimal pl-5 space-y-2 text-sm text-blue-800">
                <li>
                  <strong>Hipótese:</strong> "Um resumo mais curto aumenta a
                  taxa de leitura."
                </li>
                <li>
                  <strong>Implementação Controlada:</strong> Novo prompt
                  isolado.
                </li>
                <li>
                  <strong>Teste A/B:</strong> Controle vs Tratamento (ex:
                  90/10).
                </li>
                <li>
                  <strong>Coleta de Métricas:</strong> Latência, custo,
                  conversão.
                </li>
                <li><strong>Decisão:</strong> Promover, reverter ou iterar.</li>
              </ol>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-bold text-gray-800 mb-2">
                  Como medir qualidade?
                </h4>
                <ul class="text-sm text-gray-600 space-y-1 list-disc pl-4">
                  <li>
                    <strong>Avaliação Humana:</strong> Clareza, tom,
                    imparcialidade.
                  </li>
                  <li>
                    <strong>Avaliação Automática (QA):</strong> Usar LLM para
                    verificar contradições.
                  </li>
                  <li>
                    <strong>Métricas Quantitativas:</strong> Tamanho,
                    diversidade lexical.
                  </li>
                </ul>
              </div>
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-bold text-gray-800 mb-2">
                  Impacto Real (KPIs)
                </h4>
                <ul class="text-sm text-gray-600 space-y-1 list-disc pl-4">
                  <li>Redução de 20-40% na taxa de abandono.</li>
                  <li>Aumento de cliques na seção.</li>
                  <li>Diminuição de tickets de suporte.</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- 9. Reflexões & Próximos Passos -->
        <section
          class="bg-brand-900 rounded-2xl p-8 md:p-10 shadow-xl text-gray-200 border border-white/10"
          id="reflections"
        >
          <h2 class="text-2xl md:text-3xl font-bold text-white mb-6">
            9. Reflexões &amp; Próximos Passos
          </h2>
          <div class="w-full h-px bg-white/10 mb-8"></div>
          <div class="grid lg:grid-cols-12 gap-10 md:gap-16">
            <div
              class="lg:col-span-7 space-y-6 text-lg leading-relaxed font-light"
            >
              <p>
                Ao longo deste artigo, percorremos a jornada completa de
                transformar uma simples chamada de LLM em uma feature real,
                confiável e escalável.
              </p>
              <p>
                A principal verdade é:
                <strong
                  >O sucesso de uma feature de IA depende muito mais de
                  engenharia, observabilidade e resiliência do que do modelo em
                  si.</strong
                >
              </p>
              <p class="text-brand-200">
                O prompt é importante. O modelo é importante. Mas o que torna
                essa feature pronta para milhões de usuários é tudo aquilo que
                existe ao redor: infraestrutura, design, monitoramento e
                disciplina.
              </p>
            </div>
            <div class="lg:col-span-5">
              <h3
                class="text-sm font-bold text-brand-300 uppercase tracking-widest mb-6 font-mono"
              >
                Próximos Passos
              </h3>
              <ul class="space-y-4">
                <li class="flex items-start group">
                  <a
                    class="flex items-center w-full hover:bg-white/5 p-2 -ml-2 rounded transition-colors"
                    href="02-prompt-engineering-pace.html"
                  >
                    <span
                      class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-white/10 rounded text-xs text-brand-300 mr-3"
                    >
                      <i class="fas fa-arrow-right"></i>
                    </span>
                    <div class="flex flex-col">
                      <span
                        class="text-[10px] uppercase tracking-widest opacity-50 text-brand-300"
                        >Próximo</span
                      >
                      <span
                        class="text-sm text-gray-300 group-hover:text-white font-medium leading-tight"
                        >Prompt Engineering com PACE</span
                      >
                    </div>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </section>
      </main>
    </div>
    <footer class="bg-white border-t border-gray-200 mt-12 py-8">
      <div class="max-w-7xl mx-auto px-4 text-center text-gray-500 text-sm">
        <p>
          © 2025 LLM Engineering Series. Construído com
          <i class="fas fa-heart text-red-400"></i> e IA.
        </p>
      </div>
    </footer>
      <script src="scripts/export-visual.js"></script>
    <!-- CDN Libraries for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.js"></script>
  
  <script src="scripts/export-to-docx.js" defer></script>
</body>
</html>
